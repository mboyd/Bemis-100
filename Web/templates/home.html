$def with (patterns)
  $code:
    def show_patterns(patterns):
        s = ''
        for e in patterns:
            if type(e) is tuple:
                s += '<div class="pattern_folder">' + \
                        '<h3>' + e[0] + '</h3>' + \
                        show_patterns(e[1]) + \
                      '</div>'
            else:
                s += show_pattern(e)
        return s

    def show_pattern(p):
        s = '<a href="/play?pattern='+p+'">\n' + \
            '\t<img class="pattern" data-pattern="'+p+'" alt="pattern" ' + \
            'src="'+path_join(config['pattern_dir'],p)+'">\n' + \
            '</a>\n'
        return s

  <div id='header'>
    <h1>Bemis 100</h1>
  </div>
  
  <div id='liveview'>
    <canvas id='canvas' width='830' height='50'></canvas>
    <div id='controls'>
      <a class='pause' href='#'>Pause</a> &nbsp;&nbsp;|&nbsp;&nbsp;
      <a class='next' href='#'>Next</a>
    </div>
    <div id='status'>
      <span id='connection'></span>&nbsp;&nbsp;
      <span id='framerate'></span>
    </div>
  </div>
  
  <div id='queue'>
  	<h2>Queue</h2>
  	<ul>
  	</ul>
  </div>
  
  <div id='patterns'>
  	<h2>Patterns <a href='#'>New Pattern</a></h2>
  	$:show_patterns(patterns)
  </div>
  
  <div id='upload'>
    <form action='/upload' method='post' enctype="multipart/form-data">
      <label for='pattern'>Upload a pattern</label>
      <input type='file' name='pattern'>
      <input type='submit' value='Upload'>
    </form>
  </div>
